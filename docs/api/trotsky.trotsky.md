<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Packages](./index.md) &nbsp;&#8250;&nbsp; [trotsky](./trotsky.md) &nbsp;&#8250;&nbsp; [Trotsky](./trotsky.trotsky.md)

# Trotsky class

Trotsky orchestrates a sequence of steps that interact with an .

**Signature:**

```typescript
export declare class Trotsky<P = ParentConstraint, C = ContextConstraint, O = OutputConstraint> 
```

## Constructors

<table><thead><tr><th>

Constructor


</th><th>

Modifiers


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[(constructor)(agent, parent)](./trotsky.trotsky._constructor_.md)


</td><td>


</td><td>

Initializes a new [Trotsky](./trotsky.trotsky.md) instance.


</td></tr>
</tbody></table>

## Properties

<table><thead><tr><th>

Property


</th><th>

Modifiers


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[agent](./trotsky.trotsky.agent.md)


</td><td>

`readonly`


</td><td>

AtpAgent


</td><td>

Retrieves the current  instance.


</td></tr>
<tr><td>

[context](./trotsky.trotsky.context.md)


</td><td>


</td><td>

NonNullable&lt;C&gt; \| null


</td><td>

Retrieves or sets the current context.


</td></tr>
<tr><td>

[flattenSteps](./trotsky.trotsky.flattensteps.md)


</td><td>

`readonly`


</td><td>

[Step](./trotsky.step.md)<!-- -->\[\]


</td><td>

Retrieves a flattened list of all steps, including nested ones.


</td></tr>
<tr><td>

[isStepListEntry](./trotsky.trotsky.issteplistentry.md)


</td><td>

`readonly`


</td><td>

boolean


</td><td>

Checks if this instance is part of a [StepList](./trotsky.steplist.md)<!-- -->.


</td></tr>
<tr><td>

[isStepWhen](./trotsky.trotsky.isstepwhen.md)


</td><td>

`readonly`


</td><td>

boolean


</td><td>


</td></tr>
<tr><td>

[isTrotsky](./trotsky.trotsky.istrotsky.md)


</td><td>

`readonly`


</td><td>

boolean


</td><td>

Checks if this is a top-level [Trotsky](./trotsky.trotsky.md) instance.


</td></tr>
<tr><td>

[output](./trotsky.trotsky.output.md)


</td><td>


</td><td>

O \| null


</td><td>

Retrieves or sets the current output.


</td></tr>
<tr><td>

[steps](./trotsky.trotsky.steps.md)


</td><td>

`readonly`


</td><td>

[Step](./trotsky.step.md)<!-- -->\[\]


</td><td>

Retrieves all steps in the sequence.


</td></tr>
</tbody></table>

## Methods

<table><thead><tr><th>

Method


</th><th>

Modifiers


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[actor(param)](./trotsky.trotsky.actor.md)


</td><td>


</td><td>

Adds a [StepActor](./trotsky.stepactor.md) step.


</td></tr>
<tr><td>

[append(type, args)](./trotsky.trotsky.append.md)


</td><td>


</td><td>

Appends a new step to the sequence.


</td></tr>
<tr><td>

[applyAll()](./trotsky.trotsky.applyall.md)


</td><td>


</td><td>

Applies all steps in the sequence.


</td></tr>
<tr><td>

[back()](./trotsky.trotsky.back.md)


</td><td>


</td><td>

Retrieves the parent object.


</td></tr>
<tr><td>

[createPost(record)](./trotsky.trotsky.createpost.md)


</td><td>


</td><td>

Adds a [StepCreatePost](./trotsky.stepcreatepost.md) step.


</td></tr>
<tr><td>

[end()](./trotsky.trotsky.end.md)


</td><td>


</td><td>

Ends the sequence of steps.


</td></tr>
<tr><td>

[init(agent)](./trotsky.trotsky.init.md)


</td><td>

`static`


</td><td>

Initializes a new [Trotsky](./trotsky.trotsky.md) instance with the specified agent.


</td></tr>
<tr><td>

[post(uri)](./trotsky.trotsky.post.md)


</td><td>


</td><td>

Adds a [StepPost](./trotsky.steppost.md) step.


</td></tr>
<tr><td>

[run()](./trotsky.trotsky.run.md)


</td><td>


</td><td>

Runs the sequence of steps, returning the top-level [Trotsky](./trotsky.trotsky.md) instance.


</td></tr>
<tr><td>

[runAll()](./trotsky.trotsky.runall.md)


</td><td>


</td><td>

Runs all steps in the sequence.


</td></tr>
<tr><td>

[searchPosts(queryParams)](./trotsky.trotsky.searchposts.md)


</td><td>


</td><td>

Adds a [StepSearchPosts](./trotsky.stepsearchposts.md) step.


</td></tr>
<tr><td>

[streamPosts()](./trotsky.trotsky.streamposts.md)


</td><td>


</td><td>

Adds a [StepStreamPosts](./trotsky.stepstreamposts.md) step.


</td></tr>
<tr><td>

[tap(interceptor)](./trotsky.trotsky.tap.md)


</td><td>


</td><td>

Adds a [StepTap](./trotsky.steptap.md) step.


</td></tr>
<tr><td>

[wait(duration)](./trotsky.trotsky.wait.md)


</td><td>


</td><td>

Adds a [StepWait](./trotsky.stepwait.md) step.


</td></tr>
<tr><td>

[when(predicate)](./trotsky.trotsky.when.md)


</td><td>


</td><td>

Adds a [StepWhen](./trotsky.stepwhen.md) step.


</td></tr>
<tr><td>

[withAgent(agent)](./trotsky.trotsky.withagent.md)


</td><td>


</td><td>

Updates the agent instance.


</td></tr>
<tr><td>

[withContext(context)](./trotsky.trotsky.withcontext.md)


</td><td>


</td><td>

Sets the context.


</td></tr>
<tr><td>

[withOutput(output)](./trotsky.trotsky.withoutput.md)


</td><td>


</td><td>

Sets the output.


</td></tr>
</tbody></table>